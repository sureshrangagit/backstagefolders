{"version":3,"file":"RequireKubernetesPermissions.esm.js","sources":["../src/RequireKubernetesPermissions.tsx"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ReactNode } from 'react';\nimport {\n  kubernetesClustersReadPermission,\n  kubernetesResourcesReadPermission,\n} from '@backstage/plugin-kubernetes-common';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport { WarningPanel } from '@backstage/core-components';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\nimport { kubernetesTranslationRef } from './alpha/translation';\n\nexport type RequireKubernetesPermissionProps = {\n  children: ReactNode;\n};\n\nexport function RequireKubernetesPermissions(\n  props: RequireKubernetesPermissionProps,\n): JSX.Element | null {\n  const kubernetesClustersPermissionResult = usePermission({\n    permission: kubernetesClustersReadPermission,\n  });\n  const kubernetesResourcesPermissionResult = usePermission({\n    permission: kubernetesResourcesReadPermission,\n  });\n  const { t } = useTranslationRef(kubernetesTranslationRef);\n\n  if (\n    kubernetesClustersPermissionResult.loading ||\n    kubernetesResourcesPermissionResult.loading\n  ) {\n    return null;\n  }\n\n  if (\n    kubernetesClustersPermissionResult.allowed &&\n    kubernetesResourcesPermissionResult.allowed\n  ) {\n    return <>{props.children}</>;\n  }\n\n  return (\n    <WarningPanel\n      title={t('kubernetesContentPage.permissionAlert.title')}\n      message={t('kubernetesContentPage.permissionAlert.message')}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;AA6BO,SAAS,6BACd,KACoB,EAAA;AACpB,EAAA,MAAM,qCAAqC,aAAc,CAAA;AAAA,IACvD,UAAY,EAAA;AAAA,GACb,CAAA;AACD,EAAA,MAAM,sCAAsC,aAAc,CAAA;AAAA,IACxD,UAAY,EAAA;AAAA,GACb,CAAA;AACD,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,wBAAwB,CAAA;AAExD,EACE,IAAA,kCAAA,CAAmC,OACnC,IAAA,mCAAA,CAAoC,OACpC,EAAA;AACA,IAAO,OAAA,IAAA;AAAA;AAGT,EACE,IAAA,kCAAA,CAAmC,OACnC,IAAA,mCAAA,CAAoC,OACpC,EAAA;AACA,IAAO,uBAAA,GAAA,CAAA,QAAA,EAAA,EAAG,gBAAM,QAAS,EAAA,CAAA;AAAA;AAG3B,EACE,uBAAA,GAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,EAAE,6CAA6C,CAAA;AAAA,MACtD,OAAA,EAAS,EAAE,+CAA+C;AAAA;AAAA,GAC5D;AAEJ;;;;"}