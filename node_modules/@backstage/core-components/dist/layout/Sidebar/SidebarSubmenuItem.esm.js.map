{"version":3,"file":"SidebarSubmenuItem.esm.js","sources":["../../../src/layout/Sidebar/SidebarSubmenuItem.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext, useState } from 'react';\nimport { resolvePath, useLocation, useResolvedPath } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '../../components/Link';\nimport { IconComponent } from '@backstage/core-plugin-api';\nimport classnames from 'classnames';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport { SidebarItemWithSubmenuContext } from './config';\nimport { isLocationMatch } from './utils';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\n\n/** @public */\nexport type SidebarSubmenuItemClassKey =\n  | 'item'\n  | 'itemContainer'\n  | 'selected'\n  | 'label'\n  | 'subtitle'\n  | 'dropdownArrow'\n  | 'dropdown'\n  | 'dropdownItem'\n  | 'textContent';\n\nconst useStyles = makeStyles(\n  theme => ({\n    item: {\n      height: 48,\n      width: '100%',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.navigation.color,\n      padding: theme.spacing(2.5),\n      cursor: 'pointer',\n      position: 'relative',\n      background: 'none',\n      border: 'none',\n    },\n    itemContainer: {\n      width: '100%',\n    },\n    selected: {\n      background: '#6f6f6f',\n      color: theme.palette.common.white,\n    },\n    label: {\n      margin: theme.spacing(1.75),\n      marginLeft: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n      lineHeight: 1,\n    },\n    subtitle: {\n      fontSize: 10,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    dropdownArrow: {\n      position: 'absolute',\n      right: 21,\n    },\n    dropdown: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'end',\n    },\n    dropdownItem: {\n      width: '100%',\n      padding: '10px 0 10px 0',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n    },\n    dropdownButton: {\n      textTransform: 'none',\n      justifyContent: 'flex-start',\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n  }),\n  { name: 'BackstageSidebarSubmenuItem' },\n);\n\n/**\n * Clickable item displayed when submenu item is clicked.\n * title: Text content of item\n * to: Path to navigate to when item is clicked\n *\n * @public\n */\nexport type SidebarSubmenuItemDropdownItem = {\n  title: string;\n  to: string;\n};\n/**\n * Holds submenu item content.\n *\n * @remarks\n * title: Text content of submenu item\n * subtitle: A subtitle displayed under the main title\n * to: Path to navigate to when item is clicked\n * icon: Icon displayed on the left of text content\n * dropdownItems: Optional array of dropdown items displayed when submenu item is clicked.\n *\n * @public\n */\nexport type SidebarSubmenuItemProps = {\n  title: string;\n  subtitle?: string;\n  to?: string;\n  icon?: IconComponent;\n  dropdownItems?: SidebarSubmenuItemDropdownItem[];\n  exact?: boolean;\n  initialShowDropdown?: boolean;\n};\n\n/**\n * Item used inside a submenu within the sidebar.\n *\n * @public\n */\nexport const SidebarSubmenuItem = (props: SidebarSubmenuItemProps) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems, exact } = props;\n  const classes = useStyles();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to ?? '');\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation, exact);\n\n  const [showDropDown, setShowDropDown] = useState(\n    props.initialShowDropdown ?? false,\n  );\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== undefined) {\n    dropdownItems.some(item => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath, exact);\n      return isActive;\n    });\n    return (\n      <Box className={classes.itemContainer}>\n        <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n          <Button\n            role=\"button\"\n            onClick={handleClickDropdown}\n            onTouchStart={e => e.stopPropagation()}\n            className={classnames(\n              classes.item,\n              classes.dropdownButton,\n              isActive ? classes.selected : undefined,\n            )}\n          >\n            {Icon && <Icon fontSize=\"small\" />}\n            <Typography\n              variant=\"subtitle1\"\n              component=\"span\"\n              className={classes.label}\n            >\n              {title}\n              <br />\n              {subtitle && (\n                <Typography\n                  variant=\"caption\"\n                  component=\"span\"\n                  className={classes.subtitle}\n                >\n                  {subtitle}\n                </Typography>\n              )}\n            </Typography>\n            {showDropDown ? (\n              <ArrowDropUpIcon className={classes.dropdownArrow} />\n            ) : (\n              <ArrowDropDownIcon className={classes.dropdownArrow} />\n            )}\n          </Button>\n        </Tooltip>\n        {dropdownItems && showDropDown && (\n          <Box className={classes.dropdown}>\n            {dropdownItems.map((object, key) => (\n              <Tooltip\n                key={key}\n                title={object.title}\n                enterDelay={500}\n                enterNextDelay={500}\n              >\n                <Link\n                  to={object.to}\n                  underline=\"none\"\n                  className={classes.dropdownItem}\n                  onClick={closeSubmenu}\n                  onTouchStart={e => e.stopPropagation()}\n                >\n                  <Typography component=\"span\" className={classes.textContent}>\n                    {object.title}\n                  </Typography>\n                </Link>\n              </Tooltip>\n            ))}\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  return (\n    <Box className={classes.itemContainer}>\n      <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n        <Link\n          to={to!}\n          underline=\"none\"\n          className={classnames(\n            classes.item,\n            isActive ? classes.selected : undefined,\n          )}\n          onClick={closeSubmenu}\n          onTouchStart={e => e.stopPropagation()}\n        >\n          {Icon && <Icon fontSize=\"small\" />}\n          <Typography\n            variant=\"subtitle1\"\n            component=\"span\"\n            className={classes.label}\n          >\n            {title}\n            <br />\n            {subtitle && (\n              <Typography\n                variant=\"caption\"\n                component=\"span\"\n                className={classes.subtitle}\n              >\n                {subtitle}\n              </Typography>\n            )}\n          </Typography>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n"],"names":["classnames"],"mappings":"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"}