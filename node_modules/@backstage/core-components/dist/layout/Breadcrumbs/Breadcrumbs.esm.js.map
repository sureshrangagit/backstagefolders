{"version":3,"file":"Breadcrumbs.esm.js","sources":["../../../src/layout/Breadcrumbs/Breadcrumbs.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  MouseEvent,\n  useState,\n  Children,\n  ComponentProps,\n  Fragment,\n} from 'react';\n\ntype Props = ComponentProps<typeof MaterialBreadcrumbs>;\n\n/** @public */\nexport type BreadcrumbsClickableTextClassKey = 'root';\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      cursor: 'pointer',\n    },\n  },\n  { name: 'BackstageBreadcrumbsClickableText' },\n)(Typography);\n\n/** @public */\nexport type BreadcrumbsStyledBoxClassKey = 'root';\n\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      color: 'inherit',\n    },\n  },\n  { name: 'BackstageBreadcrumbsStyledBox' },\n)(Box);\n\n/** @public */\nexport type BreadcrumbsCurrentPageClassKey = 'root';\n\nconst BreadcrumbsCurrentPage = withStyles(\n  {\n    root: {\n      fontStyle: 'italic',\n    },\n  },\n  { name: 'BreadcrumbsCurrentPage' },\n)(Box);\n\n/**\n * Breadcrumbs component to show navigation hierarchical structure\n *\n * @public\n *\n */\nexport function Breadcrumbs(props: Props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\n  const childrenArray = Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    <Fragment>\n      <MaterialBreadcrumbs aria-label=\"breadcrumb\" {...restProps}>\n        {childrenArray.length > 1 && <StyledBox clone>{firstPage}</StyledBox>}\n        {childrenArray.length > 2 && <StyledBox clone>{secondPage}</StyledBox>}\n        {hasHiddenBreadcrumbs && (\n          <ClickableText onClick={handleClick}>...</ClickableText>\n        )}\n        <BreadcrumbsCurrentPage>{currentPage}</BreadcrumbsCurrentPage>\n      </MaterialBreadcrumbs>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        <List>\n          {expandablePages.map((pageLink, index) => (\n            <ListItem key={index} button>\n              <StyledBox clone>{pageLink}</StyledBox>\n            </ListItem>\n          ))}\n        </List>\n      </Popover>\n    </Fragment>\n  );\n}\n"],"names":[],"mappings":"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"}