{"version":3,"file":"ErrorPanel.esm.js","sources":["../../../src/components/ErrorPanel/ErrorPanel.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { PropsWithChildren } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\n/** @public */\nexport type ErrorPanelClassKey = 'text' | 'divider';\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageErrorPanel' },\n);\n\ntype ErrorListProps = {\n  error: string;\n  message: string;\n  request?: string;\n  stack?: string;\n  json?: string;\n};\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}: PropsWithChildren<ErrorListProps>) => {\n  const classes = useStyles();\n\n  return (\n    <List dense>\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Error\"\n          secondary={error}\n        />\n        <CopyTextButton text={error} />\n      </ListItem>\n\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Message\"\n          secondary={message}\n        />\n        <CopyTextButton text={message} />\n      </ListItem>\n\n      {stack && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Stack Trace\"\n            secondary={stack}\n          />\n          <CopyTextButton text={stack} />\n        </ListItem>\n      )}\n\n      {children}\n    </List>\n  );\n};\n\n/** @public */\nexport type ErrorPanelProps = {\n  error: Error;\n  defaultExpanded?: boolean;\n  titleFormat?: string;\n  title?: string;\n};\n\n/**\n * Renders a warning panel as the effect of an error.\n *\n * @public\n */\nexport function ErrorPanel(props: PropsWithChildren<ErrorPanelProps>) {\n  const { title, error, defaultExpanded, titleFormat, children } = props;\n  return (\n    <WarningPanel\n      severity=\"error\"\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n      titleFormat={titleFormat}\n    >\n      <ErrorList\n        error={error.name}\n        message={error.message}\n        stack={error.stack}\n        children={children}\n      />\n    </WarningPanel>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AA2BA,MAAM,SAAY,GAAA,UAAA;AAAA,EAChB,CAAU,KAAA,MAAA;AAAA,IACR,IAAM,EAAA;AAAA,MACJ,UAAY,EAAA,WAAA;AAAA,MACZ,UAAY,EAAA,KAAA;AAAA,MACZ,SAAW,EAAA,MAAA;AAAA,MACX,WAAA,EAAa,KAAM,CAAA,OAAA,CAAQ,CAAC;AAAA,KAC9B;AAAA,IACA,OAAS,EAAA;AAAA,MACP,MAAA,EAAQ,KAAM,CAAA,OAAA,CAAQ,CAAC;AAAA;AACzB,GACF,CAAA;AAAA,EACA,EAAE,MAAM,qBAAsB;AAChC,CAAA;AAUA,MAAM,YAAY,CAAC;AAAA,EACjB,KAAA;AAAA,EACA,OAAA;AAAA,EACA,KAAA;AAAA,EACA;AACF,CAAyC,KAAA;AACvC,EAAA,MAAM,UAAU,SAAU,EAAA;AAE1B,EACE,uBAAA,IAAA,CAAC,IAAK,EAAA,EAAA,KAAA,EAAK,IACT,EAAA,QAAA,EAAA;AAAA,oBAAC,IAAA,CAAA,QAAA,EAAA,EAAS,YAAW,YACnB,EAAA,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAS,EAAA,EAAE,SAAW,EAAA,OAAA,CAAQ,IAAK,EAAA;AAAA,UACnC,OAAQ,EAAA,OAAA;AAAA,UACR,SAAW,EAAA;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAe,EAAA,EAAA,IAAA,EAAM,KAAO,EAAA;AAAA,KAC/B,EAAA,CAAA;AAAA,oBAEA,IAAA,CAAC,QAAS,EAAA,EAAA,UAAA,EAAW,YACnB,EAAA,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAS,EAAA,EAAE,SAAW,EAAA,OAAA,CAAQ,IAAK,EAAA;AAAA,UACnC,OAAQ,EAAA,SAAA;AAAA,UACR,SAAW,EAAA;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAe,EAAA,EAAA,IAAA,EAAM,OAAS,EAAA;AAAA,KACjC,EAAA,CAAA;AAAA,IAEC,KACC,oBAAA,IAAA,CAAC,QAAS,EAAA,EAAA,UAAA,EAAW,YACnB,EAAA,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAS,EAAA,EAAE,SAAW,EAAA,OAAA,CAAQ,IAAK,EAAA;AAAA,UACnC,OAAQ,EAAA,aAAA;AAAA,UACR,SAAW,EAAA;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAe,EAAA,EAAA,IAAA,EAAM,KAAO,EAAA;AAAA,KAC/B,EAAA,CAAA;AAAA,IAGD;AAAA,GACH,EAAA,CAAA;AAEJ,CAAA;AAeO,SAAS,WAAW,KAA2C,EAAA;AACpE,EAAA,MAAM,EAAE,KAAO,EAAA,KAAA,EAAO,eAAiB,EAAA,WAAA,EAAa,UAAa,GAAA,KAAA;AACjE,EACE,uBAAA,GAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,QAAS,EAAA,OAAA;AAAA,MACT,KAAA,EAAO,SAAS,KAAM,CAAA,OAAA;AAAA,MACtB,eAAA;AAAA,MACA,WAAA;AAAA,MAEA,QAAA,kBAAA,GAAA;AAAA,QAAC,SAAA;AAAA,QAAA;AAAA,UACC,OAAO,KAAM,CAAA,IAAA;AAAA,UACb,SAAS,KAAM,CAAA,OAAA;AAAA,UACf,OAAO,KAAM,CAAA,KAAA;AAAA,UACb;AAAA;AAAA;AACF;AAAA,GACF;AAEJ;;;;"}