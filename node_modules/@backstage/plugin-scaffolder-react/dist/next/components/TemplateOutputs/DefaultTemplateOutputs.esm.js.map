{"version":3,"file":"DefaultTemplateOutputs.esm.js","sources":["../../../../src/next/components/TemplateOutputs/DefaultTemplateOutputs.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { InfoCard, MarkdownContent } from '@backstage/core-components';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport {\n  ScaffolderOutputText,\n  ScaffolderTaskOutput,\n} from '@backstage/plugin-scaffolder-react';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport { useEffect, useMemo, useState } from 'react';\n\nimport { scaffolderReactTranslationRef } from '../../../translation';\nimport { LinkOutputs } from './LinkOutputs';\nimport { TextOutputs } from './TextOutputs';\n\n/**\n * The DefaultOutputs renderer for the scaffolder task output\n *\n * @alpha\n */\nexport const DefaultTemplateOutputs = (props: {\n  output?: ScaffolderTaskOutput;\n}) => {\n  const { t } = useTranslationRef(scaffolderReactTranslationRef);\n  const { output } = props;\n  const [textOutputIndex, setTextOutputIndex] = useState<number | undefined>(\n    undefined,\n  );\n\n  useEffect(() => {\n    if (textOutputIndex === undefined && output?.text) {\n      const defaultIndex = output.text.findIndex(\n        (text: ScaffolderOutputText) => text.default,\n      );\n      setTextOutputIndex(defaultIndex >= 0 ? defaultIndex : 0);\n    }\n  }, [textOutputIndex, output]);\n\n  const textOutput = useMemo(\n    () =>\n      textOutputIndex !== undefined ? output?.text?.[textOutputIndex] : null,\n    [output, textOutputIndex],\n  );\n\n  if (!output) {\n    return null;\n  }\n\n  const displayTextButtons = (output.text || []).length > 1;\n  const emptyOutput = (output.links || []).length === 0 && !displayTextButtons;\n\n  return (\n    <>\n      {!emptyOutput ? (\n        <Box paddingBottom={2} data-testid=\"output-box\">\n          <Paper>\n            <Box\n              padding={2}\n              justifyContent=\"center\"\n              display=\"flex\"\n              gridGap={16}\n              flexWrap=\"wrap\"\n            >\n              {displayTextButtons && (\n                <TextOutputs\n                  data-testid=\"text-outputs\"\n                  output={output}\n                  index={textOutputIndex}\n                  setIndex={setTextOutputIndex}\n                />\n              )}\n              <LinkOutputs output={output} />\n            </Box>\n          </Paper>\n        </Box>\n      ) : null}\n      {textOutput ? (\n        <Box paddingBottom={2} data-testid=\"text-output-box\">\n          <InfoCard\n            title={textOutput.title ?? t('templateOutputs.title')}\n            noPadding\n            titleTypographyProps={{ component: 'h2' }}\n          >\n            <Box padding={2} height=\"100%\">\n              <MarkdownContent content={textOutput.content ?? ''} />\n            </Box>\n          </InfoCard>\n        </Box>\n      ) : null}\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;AAkCa,MAAA,sBAAA,GAAyB,CAAC,KAEjC,KAAA;AACJ,EAAA,MAAM,EAAE,CAAA,EAAM,GAAA,iBAAA,CAAkB,6BAA6B,CAAA;AAC7D,EAAM,MAAA,EAAE,QAAW,GAAA,KAAA;AACnB,EAAM,MAAA,CAAC,eAAiB,EAAA,kBAAkB,CAAI,GAAA,QAAA;AAAA,IAC5C,KAAA;AAAA,GACF;AAEA,EAAA,SAAA,CAAU,MAAM;AACd,IAAI,IAAA,eAAA,KAAoB,KAAa,CAAA,IAAA,MAAA,EAAQ,IAAM,EAAA;AACjD,MAAM,MAAA,YAAA,GAAe,OAAO,IAAK,CAAA,SAAA;AAAA,QAC/B,CAAC,SAA+B,IAAK,CAAA;AAAA,OACvC;AACA,MAAmB,kBAAA,CAAA,YAAA,IAAgB,CAAI,GAAA,YAAA,GAAe,CAAC,CAAA;AAAA;AACzD,GACC,EAAA,CAAC,eAAiB,EAAA,MAAM,CAAC,CAAA;AAE5B,EAAA,MAAM,UAAa,GAAA,OAAA;AAAA,IACjB,MACE,eAAoB,KAAA,KAAA,CAAA,GAAY,MAAQ,EAAA,IAAA,GAAO,eAAe,CAAI,GAAA,IAAA;AAAA,IACpE,CAAC,QAAQ,eAAe;AAAA,GAC1B;AAEA,EAAA,IAAI,CAAC,MAAQ,EAAA;AACX,IAAO,OAAA,IAAA;AAAA;AAGT,EAAA,MAAM,kBAAsB,GAAA,CAAA,MAAA,CAAO,IAAQ,IAAA,IAAI,MAAS,GAAA,CAAA;AACxD,EAAA,MAAM,eAAe,MAAO,CAAA,KAAA,IAAS,EAAI,EAAA,MAAA,KAAW,KAAK,CAAC,kBAAA;AAE1D,EAAA,uBAEK,IAAA,CAAA,QAAA,EAAA,EAAA,QAAA,EAAA;AAAA,IAAC,CAAA,WAAA,uBACC,GAAI,EAAA,EAAA,aAAA,EAAe,GAAG,aAAY,EAAA,YAAA,EACjC,8BAAC,KACC,EAAA,EAAA,QAAA,kBAAA,IAAA;AAAA,MAAC,GAAA;AAAA,MAAA;AAAA,QACC,OAAS,EAAA,CAAA;AAAA,QACT,cAAe,EAAA,QAAA;AAAA,QACf,OAAQ,EAAA,MAAA;AAAA,QACR,OAAS,EAAA,EAAA;AAAA,QACT,QAAS,EAAA,MAAA;AAAA,QAER,QAAA,EAAA;AAAA,UACC,kBAAA,oBAAA,GAAA;AAAA,YAAC,WAAA;AAAA,YAAA;AAAA,cACC,aAAY,EAAA,cAAA;AAAA,cACZ,MAAA;AAAA,cACA,KAAO,EAAA,eAAA;AAAA,cACP,QAAU,EAAA;AAAA;AAAA,WACZ;AAAA,0BAEF,GAAA,CAAC,eAAY,MAAgB,EAAA;AAAA;AAAA;AAAA,KAC/B,EACF,GACF,CACE,GAAA,IAAA;AAAA,IACH,6BACE,GAAA,CAAA,GAAA,EAAA,EAAI,aAAe,EAAA,CAAA,EAAG,eAAY,iBACjC,EAAA,QAAA,kBAAA,GAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,KAAO,EAAA,UAAA,CAAW,KAAS,IAAA,CAAA,CAAE,uBAAuB,CAAA;AAAA,QACpD,SAAS,EAAA,IAAA;AAAA,QACT,oBAAA,EAAsB,EAAE,SAAA,EAAW,IAAK,EAAA;AAAA,QAExC,QAAC,kBAAA,GAAA,CAAA,GAAA,EAAA,EAAI,OAAS,EAAA,CAAA,EAAG,MAAO,EAAA,MAAA,EACtB,QAAC,kBAAA,GAAA,CAAA,eAAA,EAAA,EAAgB,OAAS,EAAA,UAAA,CAAW,OAAW,IAAA,EAAA,EAAI,CACtD,EAAA;AAAA;AAAA,OAEJ,CACE,GAAA;AAAA,GACN,EAAA,CAAA;AAEJ;;;;"}