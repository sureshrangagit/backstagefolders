{"version":3,"file":"Select.esm.js","sources":["../../../src/components/Select/Select.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef, useCallback, useId, useRef, MouseEvent } from 'react';\nimport { Select as SelectPrimitive } from '@base-ui-components/react/select';\nimport { Icon } from '../Icon';\nimport clsx from 'clsx';\nimport './Select.styles.css';\nimport { SelectProps } from './types';\nimport { useResponsiveValue } from '../../hooks/useResponsiveValue';\n\n/** @public */\nexport const Select = forwardRef<HTMLDivElement, SelectProps>((props, ref) => {\n  const {\n    className,\n    label,\n    description,\n    options,\n    placeholder = 'Select an option',\n    size = 'medium',\n    required,\n    error,\n    style,\n    ...rest\n  } = props;\n\n  // Get the responsive value for the variant\n  const responsiveSize = useResponsiveValue(size);\n\n  // Generate unique IDs for accessibility\n  const selectId = useId();\n  const descriptionId = useId();\n  const errorId = useId();\n\n  const triggerRef = useRef<HTMLButtonElement>(null);\n\n  const handleLabelClick = useCallback(\n    (e: MouseEvent<HTMLLabelElement>) => {\n      if (!props.disabled && triggerRef.current) {\n        e.preventDefault();\n        triggerRef.current.focus();\n      }\n    },\n    [props.disabled],\n  );\n\n  return (\n    <div className={clsx('canon-Select', className)} style={style} ref={ref}>\n      {label && (\n        <label\n          className=\"canon-SelectLabel\"\n          htmlFor={selectId}\n          onClick={handleLabelClick}\n          data-disabled={props.disabled ? true : undefined}\n        >\n          {label}\n          {required && (\n            <span aria-hidden=\"true\" className=\"canon-SelectRequired\">\n              (Required)\n            </span>\n          )}\n        </label>\n      )}\n      <SelectPrimitive.Root {...rest}>\n        <SelectPrimitive.Trigger\n          ref={triggerRef}\n          id={selectId}\n          className=\"canon-SelectTrigger\"\n          data-size={responsiveSize}\n          data-invalid={error}\n        >\n          <SelectPrimitive.Value\n            className=\"canon-SelectValue\"\n            placeholder={placeholder}\n          />\n          <SelectPrimitive.Icon className=\"canon-SelectIcon\">\n            <Icon name=\"chevron-down\" />\n          </SelectPrimitive.Icon>\n        </SelectPrimitive.Trigger>\n        <SelectPrimitive.Portal>\n          <SelectPrimitive.Backdrop />\n          <SelectPrimitive.Positioner>\n            <SelectPrimitive.Popup className=\"canon-SelectPopup\">\n              {options?.map(option => (\n                <SelectPrimitive.Item\n                  key={option.value}\n                  value={option.value}\n                  disabled={option.disabled}\n                  className=\"canon-SelectItem\"\n                >\n                  <SelectPrimitive.ItemIndicator className=\"canon-SelectItemIndicator\">\n                    <Icon name=\"check\" />\n                  </SelectPrimitive.ItemIndicator>\n                  <SelectPrimitive.ItemText className=\"canon-SelectItemText\">\n                    {option.label}\n                  </SelectPrimitive.ItemText>\n                </SelectPrimitive.Item>\n              ))}\n            </SelectPrimitive.Popup>\n          </SelectPrimitive.Positioner>\n        </SelectPrimitive.Portal>\n      </SelectPrimitive.Root>\n      {description && (\n        <p className=\"canon-SelectDescription\" id={descriptionId}>\n          {description}\n        </p>\n      )}\n      {error && (\n        <p className=\"canon-SelectError\" id={errorId} role=\"alert\">\n          {error}\n        </p>\n      )}\n    </div>\n  );\n});\n\nSelect.displayName = 'Select';\n"],"names":["SelectPrimitive"],"mappings":"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"}