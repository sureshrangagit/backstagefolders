{"version":3,"file":"EntityTabsGroup.esm.js","sources":["../../../../src/alpha/components/EntityTabs/EntityTabsGroup.tsx"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  ReactNode,\n  forwardRef,\n  useState,\n  MouseEvent,\n  MouseEventHandler,\n} from 'react';\nimport { Link } from 'react-router-dom';\nimport classnames from 'classnames';\n\nimport Typography from '@material-ui/core/Typography';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Popover from '@material-ui/core/Popover';\nimport { TabProps, TabClassKey } from '@material-ui/core/Tab';\nimport { capitalize } from '@material-ui/core/utils';\nimport { createStyles, Theme, withStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    /* Styles applied to the root element. */\n    root: {\n      ...theme.typography.button,\n      maxWidth: 264,\n      minWidth: 72,\n      position: 'relative',\n      boxSizing: 'border-box',\n      minHeight: 48,\n      flexShrink: 0,\n      padding: '6px 12px',\n      [theme.breakpoints.up('sm')]: {\n        padding: '6px 24px',\n      },\n      overflow: 'hidden',\n      whiteSpace: 'normal',\n      textAlign: 'center',\n      [theme.breakpoints.up('sm')]: {\n        minWidth: 160,\n      },\n    },\n    popInButton: {\n      width: '100%',\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: 'uppercase',\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary,\n    },\n    /* Styles applied to the root element if both `icon` and `label` are provided. */\n    labelIcon: {\n      minHeight: 72,\n      paddingTop: 9,\n      '& $wrapper > *:first-child': {\n        marginBottom: 6,\n      },\n    },\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"inherit\"`. */\n    textColorInherit: {\n      color: 'inherit',\n      opacity: 0.7,\n      '&$selected': {\n        opacity: 1,\n      },\n      '&$disabled': {\n        opacity: 0.5,\n      },\n    },\n    selectedButton: {\n      color: `${theme.palette.text.primary}`,\n      opacity: `${1}`,\n    },\n    unselectedButton: {\n      color: `${theme.palette.text.secondary}`,\n      opacity: `${0.7}`,\n    },\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"primary\"`. */\n    textColorPrimary: {\n      color: theme.palette.text.secondary,\n      '&$selected': {\n        color: theme.palette.primary.main,\n      },\n      '&$disabled': {\n        color: theme.palette.text.disabled,\n      },\n    },\n    /* Styles applied to the root element if the parent [`Tabs`](/api/tabs/) has `textColor=\"secondary\"`. */\n    textColorSecondary: {\n      color: theme.palette.text.secondary,\n      '&$selected': {\n        color: theme.palette.secondary.main,\n      },\n      '&$disabled': {\n        color: theme.palette.text.disabled,\n      },\n    },\n    /* Pseudo-class applied to the root element if `selected={true}` (controlled by the Tabs component). */\n    selected: {},\n    /* Pseudo-class applied to the root element if `disabled={true}` (controlled by the Tabs component). */\n    disabled: {},\n    /* Styles applied to the root element if `fullWidth={true}` (controlled by the Tabs component). */\n    fullWidth: {\n      flexShrink: 1,\n      flexGrow: 1,\n      flexBasis: 0,\n      maxWidth: 'none',\n    },\n    /* Styles applied to the root element if `wrapped={true}`. */\n    wrapped: {\n      fontSize: theme.typography.pxToRem(12),\n      lineHeight: 1.5,\n    },\n    /* Styles applied to the `icon` and `label`'s wrapper element. */\n    wrapper: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: '100%',\n      flexDirection: 'row',\n    },\n  });\n\ntype EntityTabsGroupItem = {\n  id: string;\n  index: number;\n  label: string;\n  path: string;\n  group: string;\n};\n\ntype EntityTabsGroupProps = TabProps & {\n  classes?: Partial<ReturnType<typeof styles>>;\n  indicator?: ReactNode;\n  highlightedButton?: number;\n  items: EntityTabsGroupItem[];\n  onSelectTab: MouseEventHandler<HTMLAnchorElement>;\n};\n\nconst Tab = forwardRef(function Tab(props: EntityTabsGroupProps, ref: any) {\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\n  const open = Boolean(anchorEl);\n  const submenuId = open ? 'tabbed-submenu' : undefined;\n\n  const {\n    classes,\n    className,\n    disabled = false,\n    disableFocusRipple = false,\n    items,\n    fullWidth,\n    icon,\n    indicator,\n    label,\n    onSelectTab,\n    selected,\n    textColor = 'inherit',\n    wrapped = false,\n    highlightedButton,\n  } = props;\n\n  const testId = 'data-testid' in props && props['data-testid'];\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleMenuClick = (event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const classArray = [\n    classes?.root,\n    classes?.[`textColor${capitalize(textColor)}` as TabClassKey],\n    classes && {\n      [classes.disabled!]: disabled,\n      [classes.selected!]: selected,\n      [classes.labelIcon!]: label && icon,\n      [classes.fullWidth!]: fullWidth,\n      [classes.wrapped!]: wrapped,\n    },\n    className,\n  ];\n\n  const innerButtonClasses = [\n    classes?.root,\n    classes?.[`textColor${capitalize(textColor)}` as TabClassKey],\n    classes?.defaultTab,\n    classes && {\n      [classes.disabled!]: disabled,\n      [classes.labelIcon!]: label && icon,\n      [classes.fullWidth!]: fullWidth,\n      [classes.wrapped!]: wrapped,\n    },\n  ];\n\n  if (items.length === 1) {\n    return (\n      <ButtonBase\n        focusRipple={!disableFocusRipple}\n        data-testid={testId}\n        className={classnames(classArray)}\n        ref={ref}\n        role=\"tab\"\n        aria-selected={selected}\n        disabled={disabled}\n        component={Link}\n        onClick={onSelectTab}\n        to={items[0]?.path}\n      >\n        <Typography className={classes?.wrapper} variant=\"button\">\n          {icon}\n          {items[0].label}\n        </Typography>\n        {indicator}\n      </ButtonBase>\n    );\n  }\n  return (\n    <>\n      <ButtonBase\n        data-testid={testId}\n        focusRipple={!disableFocusRipple}\n        className={classnames(classArray)}\n        ref={ref}\n        role=\"tab\"\n        aria-selected={selected}\n        disabled={disabled}\n        onClick={handleMenuClick}\n      >\n        <Typography className={classes?.wrapper} variant=\"button\">\n          {label}\n        </Typography>\n        <ExpandMoreIcon />\n      </ButtonBase>\n      <Popover\n        id={submenuId}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleMenuClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n      >\n        {items.map((i, idx) => (\n          <div key={`popover_item_${idx}`}>\n            <ButtonBase\n              focusRipple={!disableFocusRipple}\n              className={classnames(\n                innerButtonClasses,\n                classes?.popInButton,\n                highlightedButton === i.index\n                  ? classes?.selectedButton\n                  : classes?.unselectedButton,\n              )}\n              ref={ref}\n              aria-selected={selected}\n              disabled={disabled}\n              component={Link}\n              onClick={e => {\n                handleMenuClose();\n                onSelectTab(e);\n              }}\n              to={i.path}\n            >\n              <Typography className={classes?.wrapper} variant=\"button\">\n                {icon}\n                {i.label}\n              </Typography>\n              {indicator}\n            </ButtonBase>\n          </div>\n        ))}\n      </Popover>\n    </>\n  );\n});\n\n// @ts-ignore\nexport const EntityTabsGroup = withStyles(styles, { name: 'MuiTab' })(Tab);\n"],"names":["Tab"],"mappings":"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"}