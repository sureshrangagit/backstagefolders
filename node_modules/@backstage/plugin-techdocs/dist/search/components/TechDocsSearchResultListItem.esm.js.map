{"version":3,"file":"TechDocsSearchResultListItem.esm.js","sources":["../../../src/search/components/TechDocsSearchResultListItem.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PropsWithChildren, ReactNode } from 'react';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\nimport { ResultHighlight } from '@backstage/plugin-search-common';\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearchResultListItem}.\n *\n * @public\n */\nexport type TechDocsSearchResultListItemProps = {\n  icon?: ReactNode | ((result: any) => ReactNode);\n  result?: any;\n  highlight?: ResultHighlight;\n  rank?: number;\n  lineClamp?: number;\n  asListItem?: boolean;\n  asLink?: boolean;\n  title?: string;\n};\n\n/**\n * Component which renders documentation and related metadata.\n *\n * @public\n */\nexport const TechDocsSearchResultListItem = (\n  props: TechDocsSearchResultListItemProps,\n) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon,\n  } = props;\n  const classes = useStyles();\n\n  const LinkWrapper = ({ children }: PropsWithChildren<{}>) =>\n    asLink ? (\n      <Link noTrack to={result.location}>\n        {children}\n      </Link>\n    ) : (\n      <>{children}</>\n    );\n\n  const TextItem = () => {\n    const resultTitle = highlight?.fields.title ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.title}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.title\n    );\n\n    const entityTitle = highlight?.fields.entityTitle ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.entityTitle}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.entityTitle\n    );\n\n    const resultName = highlight?.fields.name ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.name}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.name\n    );\n\n    if (!result) return null;\n\n    return (\n      <ListItemText\n        className={classes.itemText}\n        primaryTypographyProps={{ variant: 'h6' }}\n        primary={\n          <LinkWrapper>\n            {title ? (\n              title\n            ) : (\n              <>\n                {resultTitle} | {entityTitle ?? resultName} docs\n              </>\n            )}\n          </LinkWrapper>\n        }\n        secondary={\n          <Typography\n            component=\"span\"\n            style={{\n              display: '-webkit-box',\n              WebkitBoxOrient: 'vertical',\n              WebkitLineClamp: lineClamp,\n              overflow: 'hidden',\n            }}\n            color=\"textSecondary\"\n            variant=\"body2\"\n          >\n            {highlight?.fields.text ? (\n              <HighlightedSearchResultText\n                text={highlight.fields.text}\n                preTag={highlight.preTag}\n                postTag={highlight.postTag}\n              />\n            ) : (\n              result.text\n            )}\n          </Typography>\n        }\n      />\n    );\n  };\n\n  const ListItemWrapper = ({ children }: PropsWithChildren<{}>) =>\n    asListItem ? (\n      <>\n        {icon && (\n          <ListItemIcon>\n            {typeof icon === 'function' ? icon(result) : icon}\n          </ListItemIcon>\n        )}\n        <div className={classes.flexContainer}>{children}</div>\n      </>\n    ) : (\n      <>{children}</>\n    );\n\n  return (\n    <ListItemWrapper>\n      <TextItem />\n    </ListItemWrapper>\n  );\n};\n"],"names":[],"mappings":"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"}