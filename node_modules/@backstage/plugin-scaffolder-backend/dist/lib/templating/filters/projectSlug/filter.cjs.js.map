{"version":3,"file":"filter.cjs.js","sources":["../../../../../src/lib/templating/filters/projectSlug/filter.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ScmIntegrations } from '@backstage/integration';\nimport { parseRepoUrl } from '@backstage/plugin-scaffolder-node';\nimport { createTemplateFilter } from '@backstage/plugin-scaffolder-node/alpha';\nimport { examples } from './examples';\n\nexport const createProjectSlug = (integrations: ScmIntegrations) =>\n  createTemplateFilter({\n    id: 'projectSlug',\n    description: 'Generates a project slug from a repository URL.',\n    schema: z =>\n      z\n        .function()\n        .args(\n          z.string().describe('repo URL as collected from repository picker'),\n        )\n        .returns(z.string()),\n    examples,\n    filter: repoUrl => {\n      const { owner, repo } = parseRepoUrl(repoUrl, integrations);\n      return `${owner}/${repo}`;\n    },\n  });\n"],"names":["createTemplateFilter","examples","parseRepoUrl"],"mappings":";;;;;;AAoBa,MAAA,iBAAA,GAAoB,CAAC,YAAA,KAChCA,0BAAqB,CAAA;AAAA,EACnB,EAAI,EAAA,aAAA;AAAA,EACJ,WAAa,EAAA,iDAAA;AAAA,EACb,MAAQ,EAAA,CAAA,CAAA,KACN,CACG,CAAA,QAAA,EACA,CAAA,IAAA;AAAA,IACC,CAAE,CAAA,MAAA,EAAS,CAAA,QAAA,CAAS,8CAA8C;AAAA,GAEnE,CAAA,OAAA,CAAQ,CAAE,CAAA,MAAA,EAAQ,CAAA;AAAA,YACvBC,iBAAA;AAAA,EACA,QAAQ,CAAW,OAAA,KAAA;AACjB,IAAA,MAAM,EAAE,KAAO,EAAA,IAAA,EAAS,GAAAC,iCAAA,CAAa,SAAS,YAAY,CAAA;AAC1D,IAAO,OAAA,CAAA,EAAG,KAAK,CAAA,CAAA,EAAI,IAAI,CAAA,CAAA;AAAA;AAE3B,CAAC;;;;"}