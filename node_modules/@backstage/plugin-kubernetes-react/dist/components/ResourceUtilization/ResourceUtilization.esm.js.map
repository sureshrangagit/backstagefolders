{"version":3,"file":"ResourceUtilization.esm.js","sources":["../../../src/components/ResourceUtilization/ResourceUtilization.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport { GaugePropsGetColor, LinearGauge } from '@backstage/core-components';\nimport { currentToDeclaredResourceToPerc } from '../../utils/resources';\n\n/**\n * Context for Pod Metrics\n *\n * @public\n */\nexport interface ResourceUtilizationProps {\n  compressed?: boolean;\n  title: string;\n  usage: number | string;\n  total: number | string;\n  totalFormatted: string;\n}\n\nconst getProgressColor: GaugePropsGetColor = ({\n  palette,\n  value,\n  inverse,\n  max,\n}) => {\n  if (isNaN(value)) {\n    return palette.status.pending;\n  }\n  const actualMax = max ? max : 100;\n  const actualValue = inverse ? actualMax - value : value;\n\n  if (actualValue >= actualMax) {\n    return palette.status.error;\n  } else if (actualValue > 90 || actualValue < 40) {\n    return palette.status.warning;\n  }\n\n  return palette.status.ok;\n};\n\n/**\n * Context for Pod Metrics\n *\n * @public\n */\nexport const ResourceUtilization = ({\n  compressed = false,\n  title,\n  usage,\n  total,\n  totalFormatted,\n}: ResourceUtilizationProps) => {\n  const utilization = currentToDeclaredResourceToPerc(usage, total);\n  return (\n    <Grid container spacing={0}>\n      <Grid item xs={12}>\n        <Typography\n          variant={compressed ? 'caption' : 'subtitle2'}\n        >{`${title}: ${totalFormatted}`}</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <LinearGauge\n          getColor={getProgressColor}\n          width={compressed ? 'thin' : 'thick'}\n          value={utilization / 100}\n        />\n        {!compressed && (\n          <Typography variant=\"caption\">usage: {`${utilization}%`}</Typography>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAkCA,MAAM,mBAAuC,CAAC;AAAA,EAC5C,OAAA;AAAA,EACA,KAAA;AAAA,EACA,OAAA;AAAA,EACA;AACF,CAAM,KAAA;AACJ,EAAI,IAAA,KAAA,CAAM,KAAK,CAAG,EAAA;AAChB,IAAA,OAAO,QAAQ,MAAO,CAAA,OAAA;AAAA;AAExB,EAAM,MAAA,SAAA,GAAY,MAAM,GAAM,GAAA,GAAA;AAC9B,EAAM,MAAA,WAAA,GAAc,OAAU,GAAA,SAAA,GAAY,KAAQ,GAAA,KAAA;AAElD,EAAA,IAAI,eAAe,SAAW,EAAA;AAC5B,IAAA,OAAO,QAAQ,MAAO,CAAA,KAAA;AAAA,GACb,MAAA,IAAA,WAAA,GAAc,EAAM,IAAA,WAAA,GAAc,EAAI,EAAA;AAC/C,IAAA,OAAO,QAAQ,MAAO,CAAA,OAAA;AAAA;AAGxB,EAAA,OAAO,QAAQ,MAAO,CAAA,EAAA;AACxB,CAAA;AAOO,MAAM,sBAAsB,CAAC;AAAA,EAClC,UAAa,GAAA,KAAA;AAAA,EACb,KAAA;AAAA,EACA,KAAA;AAAA,EACA,KAAA;AAAA,EACA;AACF,CAAgC,KAAA;AAC9B,EAAM,MAAA,WAAA,GAAc,+BAAgC,CAAA,KAAA,EAAO,KAAK,CAAA;AAChE,EAAA,uBACG,IAAA,CAAA,IAAA,EAAA,EAAK,SAAS,EAAA,IAAA,EAAC,SAAS,CACvB,EAAA,QAAA,EAAA;AAAA,oBAAA,GAAA,CAAC,IAAK,EAAA,EAAA,IAAA,EAAI,IAAC,EAAA,EAAA,EAAI,EACb,EAAA,QAAA,kBAAA,GAAA;AAAA,MAAC,UAAA;AAAA,MAAA;AAAA,QACC,OAAA,EAAS,aAAa,SAAY,GAAA,WAAA;AAAA,QAClC,QAAA,EAAA,CAAA,EAAG,KAAK,CAAA,EAAA,EAAK,cAAc,CAAA;AAAA;AAAA,KAC/B,EAAA,CAAA;AAAA,oBACC,IAAA,CAAA,IAAA,EAAA,EAAK,IAAI,EAAA,IAAA,EAAC,IAAI,EACb,EAAA,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,WAAA;AAAA,QAAA;AAAA,UACC,QAAU,EAAA,gBAAA;AAAA,UACV,KAAA,EAAO,aAAa,MAAS,GAAA,OAAA;AAAA,UAC7B,OAAO,WAAc,GAAA;AAAA;AAAA,OACvB;AAAA,MACC,CAAC,UAAA,oBACC,IAAA,CAAA,UAAA,EAAA,EAAW,SAAQ,SAAU,EAAA,QAAA,EAAA;AAAA,QAAA,SAAA;AAAA,QAAQ,GAAG,WAAW,CAAA,CAAA;AAAA,OAAI,EAAA;AAAA,KAE5D,EAAA;AAAA,GACF,EAAA,CAAA;AAEJ;;;;"}