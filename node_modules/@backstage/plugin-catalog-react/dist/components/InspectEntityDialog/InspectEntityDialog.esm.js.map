{"version":3,"file":"InspectEntityDialog.esm.js","sources":["../../../src/components/InspectEntityDialog/InspectEntityDialog.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ComponentProps, useEffect, useState, ReactNode } from 'react';\nimport { AncestryPage } from './components/AncestryPage';\nimport { ColocatedPage } from './components/ColocatedPage';\nimport { JsonPage } from './components/JsonPage';\nimport { OverviewPage } from './components/OverviewPage';\nimport { YamlPage } from './components/YamlPage';\nimport { catalogReactTranslationRef } from '../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst useStyles = makeStyles(theme => ({\n  fullHeightDialog: {\n    height: 'calc(100% - 64px)',\n  },\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    width: '100%',\n    backgroundColor: theme.palette.background.paper,\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0,\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: 'auto',\n  },\n}));\n\nfunction TabPanel(props: {\n  children?: ReactNode;\n  index: number;\n  value: number;\n}) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles();\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`vertical-tabpanel-${index}`}\n      aria-labelledby={`vertical-tab-${index}`}\n      className={classes.tabContents}\n      {...other}\n    >\n      {value === index && (\n        <Box pl={3} pr={3}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nfunction a11yProps(index: number) {\n  return {\n    id: `vertical-tab-${index}`,\n    'aria-controls': `vertical-tabpanel-${index}`,\n  };\n}\n\nconst tabNames: Record<\n  NonNullable<ComponentProps<typeof InspectEntityDialog>['initialTab']>,\n  string\n> = {\n  overview: 'Overview',\n  ancestry: 'Ancestry',\n  colocated: 'Colocated',\n  json: 'Raw JSON',\n  yaml: 'Raw YAML',\n} as const;\n\nconst tabs = Object.keys(tabNames) as Array<keyof typeof tabNames>;\n\n/**\n * A dialog that lets users inspect the low level details of their entities.\n *\n * @public\n */\nexport function InspectEntityDialog(props: {\n  open: boolean;\n  entity: Entity;\n  initialTab?: 'overview' | 'ancestry' | 'colocated' | 'json' | 'yaml';\n  onClose: () => void;\n  onSelect?: (tab: string) => void;\n}) {\n  const classes = useStyles();\n\n  const [activeTab, setActiveTab] = useState(\n    getTabIndex(tabs, props.initialTab),\n  );\n  const { t } = useTranslationRef(catalogReactTranslationRef);\n\n  useEffect(() => {\n    getTabIndex(tabs, props.initialTab);\n  }, [props.open, props.initialTab]);\n\n  if (!props.entity) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"xl\"\n      open={props.open}\n      onClose={props.onClose}\n      aria-labelledby=\"entity-inspector-dialog-title\"\n      PaperProps={{ className: classes.fullHeightDialog }}\n    >\n      <DialogTitle id=\"entity-inspector-dialog-title\">\n        {t('inspectEntityDialog.title')}\n      </DialogTitle>\n      <DialogContent dividers>\n        <div className={classes.root}>\n          <Tabs\n            orientation=\"vertical\"\n            variant=\"scrollable\"\n            value={activeTab}\n            onChange={(_, tabIndex) => {\n              setActiveTab(tabIndex);\n              props.onSelect?.(tabs[tabIndex]);\n            }}\n            aria-label=\"Inspector options\"\n            className={classes.tabs}\n          >\n            {tabs.map((tab, index) => (\n              <Tab key={tab} label={tabNames[tab]} {...a11yProps(index)} />\n            ))}\n          </Tabs>\n\n          <TabPanel value={activeTab} index={0}>\n            <OverviewPage entity={props.entity} />\n          </TabPanel>\n          <TabPanel value={activeTab} index={1}>\n            <AncestryPage entity={props.entity} />\n          </TabPanel>\n          <TabPanel value={activeTab} index={2}>\n            <ColocatedPage entity={props.entity} />\n          </TabPanel>\n          <TabPanel value={activeTab} index={3}>\n            <JsonPage entity={props.entity} />\n          </TabPanel>\n          <TabPanel value={activeTab} index={4}>\n            <YamlPage entity={props.entity} />\n          </TabPanel>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={props.onClose} color=\"primary\">\n          {t('inspectEntityDialog.closeButtonTitle')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction getTabIndex(\n  allTabs: string[],\n  initialTab: keyof typeof tabNames | undefined,\n) {\n  return initialTab ? allTabs.indexOf(initialTab) : 0;\n}\n"],"names":[],"mappings":"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"}